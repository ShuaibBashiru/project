YUI.add("hermes-template-simplified-pro-hello-pro",function(a,e){var s=a.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(a,e,s,l,t){var n,i=null!=e?e:{},r=s.helperMissing,h=a.escapeExpression;return"<h1>"+h((s.intlMessage||e&&e.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"checkout.HELLO_PRO"},data:t}))+"</h1>\n<p>"+h((s.intlMessage||e&&e.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"checkout.GET_STARTED_WITH_SUPERPOWERS"},data:t}))+'</p>\n\n<ul>\n\t<li class="freebrowsing"><span></span><a href="/">'+h((s.intlMessage||e&&e.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"checkout.BROWSE_AD_FREE"},data:t}))+'</a></li>\n\t<li class="auto-uploadr"><span></span><a href="/tools">'+h((s.intlMessage||e&&e.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"checkout.GET_AUTO_UPLOADR"},data:t}))+'</a></li>\n\t<li class="partners"><span></span><a href="/account">'+h((s.intlMessage||e&&e.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"checkout.VIEW_PARTNER_PERKS"},data:t}))+"</a></li>\n</ul>\n<p>"+h((s.intlMessage||e&&e.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"checkout.SHARE_YOUR_NEW_ADFREE_PHOTOSTREAM"},data:t}))+'</p>\n<p><a href="'+h("function"==typeof(n=null!=(n=s.photostreamURL||(null!=e?e.photostreamURL:e))?n:r)?n.call(i,{name:"photostreamURL",hash:{},data:t}):n)+'">'+h("function"==typeof(n=null!=(n=s.photostreamURL||(null!=e?e.photostreamURL:e))?n:r)?n.call(i,{name:"photostreamURL",hash:{},data:t}):n)+"</a></p>\n"},useData:!0}),l={};a.Array.each([],function(e){var s=a.Template.get("hermes/"+e);s&&(l[e]=s)}),a.Template.register("hermes/simplified-pro-hello-pro",function(e,t){return t=t||{},t.partials=t.partials?a.merge(l,t.partials):l,s(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("jsonp",function(e,t){function r(){this._init.apply(this,arguments)}var n=e.Lang.isFunction;r.prototype={_init:function(t,r){this.url=t,this._requests={},this._timeouts={},r=n(r)?{on:{success:r}}:r||{};var i=r.on||{};i.success||(i.success=this._defaultCallback(t,r)),this._config=e.merge({context:this,args:[],format:this._format,allowCache:!1},r,{on:i})},_defaultCallback:function(){},send:function(){function u(e,r){return n(e)?function(n){var o=!0,u="_requests";r?(++t._timeouts[s],--t._requests[s]):(t._requests[s]||(o=!1,u="_timeouts"),--t[u][s]),!t._requests[s]&&!t._timeouts[s]&&delete YUI.Env.JSONP[s],o&&e.apply(i.context,[n].concat(i.args))}:null}var t=this,r=e.Array(arguments,0,!0),i=t._config,s=t._proxy||e.guid(),o;return i.allowCache&&(t._proxy=s),t._requests[s]===undefined&&(t._requests[s]=0),t._timeouts[s]===undefined&&(t._timeouts[s]=0),t._requests[s]++,r.unshift(t.url,"YUI.Env.JSONP."+s),o=i.format.apply(t,r),i.on.success?(YUI.Env.JSONP[s]=u(i.on.success),e.Get.js(o,{onFailure:u(i.on.failure),onTimeout:u(i.on.timeout,!0),timeout:i.timeout,charset:i.charset,attributes:i.attributes,async:i.async}).execute(),t):t},_format:function(e,t){return e.replace(/\{callback\}/,t)}},e.JSONPRequest=r,e.jsonp=function(t,n){var r=new e.JSONPRequest(t,n);return r.send.apply(r,e.Array(arguments,2,!0))},YUI.Env.JSONP||(YUI.Env.JSONP={})},"3.16.0",{requires:["get","oop"]});
YUI.add("digital-river-helper",function(e){"use strict";var i=require("superagent"),t=require("superagent-jsonp"),r=require("url-parse");e.DigitalRiverHelper=function(i){this.appContext=i.appContext||!1,this.storeBaseURL=e.config.flickr.digitalRiver.storeBaseUrl,this.proLandingPageUrl="/account/upgrade/pro"},e.DigitalRiverHelper.prototype.getAnalyticsBeaconsPrefix=function(){return"[DR] "},e.DigitalRiverHelper.prototype.getClientSideSessionToken=function(){var t=e.config.flickr.digitalRiver.clientSessionTokenUrl;return e.Cookie.remove("JSESSIONID",{path:"/",domain:e.config.flickr.digitalRiver.storeBaseUrl}),e.Cookie.remove("VISITOR_ID",{path:"/",domain:e.config.flickr.digitalRiver.storeBaseUrl}),i.get(t).then(function(e){return e.body.session_token}.bind(this)).catch(function(e){return e})},e.DigitalRiverHelper.prototype.getClientSideSessionTokenJSONP=function(){var r=e.config.flickr.digitalRiver.clientSessionTokenUrl,n=e.config.flickr.digitalRiver.logoutUrl;return i.get(n).use(t({timeout:1e4,callbackName:"drLogout"+(new Date).getTime()})).then(function(e){return i.get(r).use(t({timeout:1e4,callbackName:"drSessionToken"+(new Date).getTime()})).then(function(e){return e.body.session_token})})},e.DigitalRiverHelper.prototype.getAPISessionRedirectUrl=function(i){return i=this.setDREnv(i),e.config.flickr.digitalRiver.userManagementPageBaseUrl+"APISessionRedirect?url="+encodeURIComponent(i)},e.DigitalRiverHelper.prototype.createCartAndGetStoreURL=function(i){return this.appContext.callAPI("flickr.digital.river.subscriptions.addProductToCart",i).then(function(t){if(t&&t.redirectUrl){var r=t.redirectUrl+"&currency="+i.currency+"&fproUrl="+i.fProUrl;return this.sanitizeRedirectUrl(r)}return e.url(this.proLandingPageUrl)}.bind(this)).catch(function(e){throw e})},e.DigitalRiverHelper.prototype.initializeSessionOnDR=function(e){return this.appContext.callAPI("flickr.digital.river.subscriptions.initializeSession",e).then(function(e){return!0}.bind(this)).catch(function(e){throw e})},e.DigitalRiverHelper.prototype.sanitizeRedirectUrl=function(i){var t=new r(i);if("https:"===t.protocol&&t.hostname===this.storeBaseURL){return this.setDREnv(i)}return console.log("checkout url validation failed"),e.url("/account")},e.DigitalRiverHelper.prototype.getRedirectUrlToUpdatePaymentMethod=function(i,t){var r=e.config.flickr.digitalRiver.userManagementPageBaseUrl+t+"/DisplayUpdateAddressPaymentInfoPage/";return i.getValue("isPaypal")?r+="?subscriptionID="+i.getValue("details").paymentVendorSubscriptionId:r+="?billingOptionID="+i.getValue("details").paymentVendorCreditCardToken,this.getAPISessionRedirectUrl(r)},e.DigitalRiverHelper.prototype.setDREnv=function(e){return this.appContext.flipper.isFlipped("enable-digital-river-design-env")?e+="&ENV=DESIGN":e},e.DigitalRiverHelper.prototype.getRedirectUrlToInvoicePage=function(i,t){i=i||"";var r=e.config.flickr.digitalRiver.userManagementPageBaseUrl+t+"/DisplayInvoicePage/?requisitionID="+i;return this.getAPISessionRedirectUrl(r)},e.DigitalRiverHelper.prototype.beaconError=function(i,t){if(!YUI.Env.isServer&&e.config.win.beaconError){var r={UA:("undefined"!=typeof navigator&&navigator.userAgent||"").toString(),signedIn:1,message:i};t&&(r=e.merge(r,t)),e.config.win.beaconError("[digital-river] ",e.config.win.location.href,r)}},e.DigitalRiverHelper.prototype.parseCartAction=function(e){var i="";if(e)switch(e){case"edit":case"update":case"purchase":case"optin":i=e;break;default:i=null}else i=null;return i}},"@VERSION@",{requires:["array-extras","jsonp","cookie"],optional:[],optionalRequires:["superagent"]});YUI.add("hermes-template-photo-limit-overlay",function(e,a){var l=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,l,t,i){var s;return'<div class="photo-limit-overlay '+e.escapeExpression("function"==typeof(s=null!=(s=l.additionalClasses||(null!=a?a.additionalClasses:a))?s:l.helperMissing)?s.call(null!=a?a:{},{name:"additionalClasses",hash:{},data:i}):s)+'">\n\t<div class="panel-container">\n\t</div>\n</div>\n'},useData:!0}),t={};e.Array.each([],function(a){var l=e.Template.get("hermes/"+a);l&&(t[a]=l)}),e.Template.register("hermes/photo-limit-overlay",function(a,i){return i=i||{},i.partials=i.partials?e.merge(t,i.partials):t,l(a,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-limit-panel",function(n,e){var t=n.Template.Handlebars.revive({1:function(n,e,t,a,r){return" active"},3:function(n,e,t,a,r){return" hidden off-right"},5:function(n,e,t,a,r){return'<p class="sub-text">'+n.escapeExpression((t.preventOrphans||e&&e.preventOrphans||t.helperMissing).call(null!=e?e:{},null!=e?e.subText:e,{name:"preventOrphans",hash:{},data:r}))+"</p>"},compiler:[7,">= 4.0.0"],main:function(n,e,t,a,r){var l,s,p=null!=e?e:{},i=t.helperMissing,u=n.escapeExpression;return'<div class="panel'+(null!=(l=t.if.call(p,null!=e?e.initialActive:e,{name:"if",hash:{},fn:n.program(1,r,0),inverse:n.program(3,r,0),data:r}))?l:"")+'" data-panel-index="'+u("function"==typeof(s=null!=(s=t.panelIndex||(null!=e?e.panelIndex:e))?s:i)?s.call(p,{name:"panelIndex",hash:{},data:r}):s)+'">\n\t<div class="panel-content">\n\t\t<h2>'+u((t.preventOrphans||e&&e.preventOrphans||i).call(p,null!=e?e.title:e,{name:"preventOrphans",hash:{},data:r}))+'</h2>\n\t\t<div class="description-container">\n\t\t\t'+u((t.renderTrustedMarkup||e&&e.renderTrustedMarkup||i).call(p,null!=e?e.description:e,{name:"renderTrustedMarkup",hash:{},data:r}))+'\n\t\t</div>\n\n\t\t<div class="button-container">\n\t\t\t<a href="/account/upgrade/pro?select" class="button accept-button pro-link">'+u((t.preventOrphans||e&&e.preventOrphans||i).call(p,null!=e?e.acceptButtonText:e,{name:"preventOrphans",hash:{},data:r}))+'</a>\n\t\t\t<button class="button unfluid decline-button">'+u((t.preventOrphans||e&&e.preventOrphans||i).call(p,null!=e?e.declineButtonText:e,{name:"preventOrphans",hash:{},data:r}))+"</button>\n\t\t</div>\n\n\t\t"+(null!=(l=t.if.call(p,null!=e?e.subText:e,{name:"if",hash:{},fn:n.program(5,r,0),inverse:n.noop,data:r}))?l:"")+"\n\t</div>\n</div>\n"},useData:!0}),a={};n.Array.each([],function(e){var t=n.Template.get("hermes/"+e);t&&(a[e]=t)}),n.Template.register("hermes/photo-limit-panel",function(e,r){return r=r||{},r.partials=r.partials?n.merge(a,r.partials):a,t(e,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("flickr-profile-setProfile-updater",function(e,i){"use strict";e.namespace("ModelUpdaters")["flickr-profile-setProfile"]={run:function(l,r){var t=(function(e){var i={};return i.extras="full_response,expand_bbml,social_urls","profileDescription"===e.field?e.field="description":"website"===e.field&&(e.field="website_url"),i[e.field]=e.value,i})(l);return new e.FlickrPromise({apiResponse:r.callAPI("flickr.profile.setProfile",t),personPublicProfileModel:r.getModel("person-public-profile-models",l.id)}).then(function(e){return(function(e,i,l,r){var t=e.apiResponse,o=e.personPublicProfileModel;if(t){var s=t[l.field],f={stat:t.stat,field:l.field,value:s};return"description"===l.field?(l.field="profileDescription",o.setValue("profileDescription",t.description),o.setValue("profileDescriptionExpanded",t.descriptionExpanded)):"website_url"===l.field?(l.field="website",o.setValue("website",s)):["instagram","facebook","tumblr","pinterest","twitter"].indexOf(l.field)>-1?(o.setValue(l.field,t[l.field]),o.setValue(l.field+"Url",t[l.field+"Url"])):void 0===s?o.setValue(l.field,i[l.field]):o.setValue(l.field,s),f}})(e,t,l)}.bind(this),e.FetcherErrorLogger(i))}}},"@VERSION@",{requires:["flickr-promise"],optional:["person-public-profile-models"]});YUI.add("person-public-profile-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-profile-getProfile"].run(t,this.appContext)},updateField:function(t,r){return e.ModelUpdaters["flickr-profile-setProfile"].run(t,r)}},remoteUpdateDescription:function(e,t,r){return this.setValue(e,"description",t.description),this.remote.updateBioField(t,r)},attributes:{nsid:{readOnly:!0,defaultFn:function(e){return e}},joinedDate:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},showcaseSetId:{defaultValue:"0"},city:{},country:{},firstName:{},lastName:{},hometown:{},email:{},occupation:{},profileDescription:{},profileDescriptionExpanded:{},timezone:{},website:{},facebook:{},facebookUrl:{},instagram:{},instagramUrl:{},tumblr:{},tumblrUrl:{},twitter:{},twitterUrl:{},pinterest:{},pinterestUrl:{},totalViews:{},totalTags:{},totalGeotagged:{},totalFaves:{},totalInGroup:{}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-profile-getProfile-fetcher","flickr-profile-setProfile-updater"]});